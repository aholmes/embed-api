<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js"> (function(MTVNPlayer, $) {
     &quot;use strict&quot;;
     if($) {
         var eventPrefix = &quot;MTVNPlayer:&quot;,
             // support for MTVN.config.player
             legacyConfig = function(MTVN) {
                 if(MTVN &amp;&amp; MTVN.config &amp;&amp; MTVN.config.player) {
                     return MTVN.config.player;
                 }
             }(window.MTVN),
             // default config creates players at 100% width and height,
             // also copy the properties from MTVN.player.config or MTVNPlayer.defaultConfig.
             defaultConfig = MTVNPlayer.module(&quot;config&quot;).copyProperties({
                 &quot;width&quot;: &quot;100%&quot;,
                 &quot;height&quot;: &quot;100%&quot;
             }, legacyConfig || MTVNPlayer.defaultConfig),
             // inject styles once.
             setStyles = function() {
                 setStyles = function() {};
                 var rules = &quot;\n.MTVNPlayer_placeholder {cursor:pointer; position: relative;}\n&quot; + &quot;.MTVNPlayer_placeholder_button {\n&quot; + &quot;position:absolute;\n&quot; + &quot;height: 100%;\n&quot; + &quot;width: 100%;\n&quot; + &quot;top:0;\n&quot; + &quot;left:0;\n&quot; + &quot;background: no-repeat url(http://media.mtvnservices.com/player/images/Button_playBig_upSkin.png) center;\n&quot; + &quot;}\n&quot; + &quot;\n&quot; + &quot;.MTVNPlayer_placeholder_button:hover {\n&quot; + &quot;background-image: url(http://media.mtvnservices.com/player/images/Button_playBig_overSkin.png)\n&quot; + &quot;}\n&quot;;
                 MTVNPlayer.module(&quot;core&quot;).appendStyle(rules);
             },
             // allow $(&quot;MTVNPlayer&quot;).trigger(&quot;MTVNPlayer:playIndex&quot;,[0,20]);.
             mapMethods = function(el) {
                 var player = el.data(&quot;player&quot;),
                     invoke = function(event, arg1, arg2) {
                         var method = event.type.replace(eventPrefix, &quot;&quot;);
                         player[method].apply(player, [arg1, arg2]);
                     };
                 for(var prop in MTVNPlayer.Player.prototype) {
                     el.bind(eventPrefix + prop, invoke);
                 }
             },
             // creates a player and hooks up
             createPlayer = function($el) {
                 var config = MTVNPlayer.module(&quot;config&quot;).buildConfig($el[0], defaultConfig),
                     player;
                 player = new MTVNPlayer.Player($el[0], config);
                 $el.data(&quot;player&quot;, player);
                 player.$el = $el;
                 mapMethods($el);
             };
         // main plugin function
         $.fn.player = function(options) {
             // callback is fired after an MTVNPlayer is created.
             var callback = $.isFunction(options) ? options : function() {},
                 // first we look for .MTVNPlayer, then we refine to .MTVNPlayers with contenturis.
                 self = this.not(function() {
                     return $(this).data(&quot;contenturi&quot;) ? false : true;
                 });
             if(self.length &gt; 0) {
                 // prepare placeholders.
                 self.each(function() {
                     var $el = $(this);
                     if(!MTVNPlayer.isHTML5Player &amp;&amp; $el.children().length &gt; 0) { // if element has children, assume placeholders.
                         // inject placeholder styles.
                         setStyles();
                         // wrap the placeholder and add the button.
                         $el.html(function(idx, old) {
                             return '&lt;div class=&quot;MTVNPlayer_placeholder&quot;&gt;' + old + '&lt;div class=\&quot;MTVNPlayer_placeholder_button\&quot;&gt;&lt;/div&gt;&lt;/div&gt;';
                         });
                         // when clicked, create a player.
                         $el.delegate(&quot;div.MTVNPlayer_placeholder&quot;, &quot;click&quot;, function(e) {
                             e.preventDefault();
                             // store markup for later use
                             $el.find(&quot;div.MTVNPlayer_placeholder&quot;).hide();
                             $el.bind(&quot;MTVNPlayer:showPlaceholder&quot;, function() {
                                 $el.children().not(&quot;div.MTVNPlayer_placeholder&quot;).remove();
                                 $el.find(&quot;div.MTVNPlayer_placeholder&quot;).show();
                                 delete $el.data().player;
                             });
                             $el.data(&quot;autoplay&quot;, true);
                             createPlayer($el);
                             callback();
                         });
                     } else { // else add the div for the player to grow into.
                         $el.empty();
                         createPlayer($el);
                         callback();
                     }
                 });
             } else {
                 // nothing happened.
                 callback();
             }
         };
     }
 })(window.MTVNPlayer, window.jQuery || window.Zepto);</pre>
</body>
</html>
